---
title: Confidential Computation
description: Programmable privacy on SUAVE and how to make the most of it
keywords:
  - reference
  - suave
  - privacy
  - confidential
  - compute
---

# Keeping it confidential

The [MEVM](/reference/MEVM) has two modes of operation: regular and confidential (sometimes called off-chain). 

Regular mode is the same as the normal EVM. Confidential mode uses the [new confidential compute APIs](/reference/confidential-computation/apis), and the [precompiles](/reference/precompiles) available in [builder solidity](reference/builder-solidity), to ensure that transaction data provided by users remains private.

Builder solidity uses (and extends) all the tools and patterns you know and love. However, the concept of confidential computation being done off-chain by specific MEVM nodes is new and worth emphasizing. 

Users can encrypt their transaction data for specific MEVM nodes. Those nodes run the necessary computation (as defined in the public contract referenced in the transaction data), and insert the result into the `calldata` of a SUAVE transaction that is submitted to the public mempool, ensuring that only the results (and not the input) are broadcast publicly. 

> **This is the way we combine the benefits of public, verifiable mechanisms with private data**.

## Flow

You can sign and submit transactions as you ordinarily would on Ethereum and they will work as expected. 

We describe here what occurs when you want your transaction to _remain confidential_.

1. Create a `confidentialComputeRequest` and specify a MEVM node: i.e. an address whose signature over the confidential computation result will be trusted. 
2. The MEVM node executes the transaction in confidential mode, creating a `confidentialComputeResult`.
3. The `confidentialComputeResult` is set as the calldata in a "SUAVE transaction", which is broadcast to the public mempool.
4. We call this a "SUAVE transaction" because it is a normal EVM transaction, with an extra check to make sure that the MEVM node's signature matches the requested MEVM node in (1)

Please take a look through our detailed [worked examples](/reference/confidential-computation/worked-examples) page if you want to dive deeper into the specifics of how each step occurs.

## Definitions

For clarity, let's define `confidentialComputeRequest` and `confidentialComputeResult`. 

1. `confidentialComputeRequest` is a _request_ for confidential computation to a specfic (set of) MEVM node(s). 
    - It holds an ordinary Ethereum transaction in its `confidential_inputs` field
    - It specifies the address(es) of the MEVM node for whom the data in the transaction is encrypted. 
    - These requests are _not_ propagated through the mempool or included in blocks.
2. `confidentialComputeResult` is the _result_ of the confidential computation, shared with the whole SUAVE chain. 
    - The MEVM node takes the `confidentialComputeRequest`, adds the result it computed, signs it, and broadcasts it as a SUAVE transaction to the mempool.
    - Confidential execution is _not_ verifiable during on-chain state transition. However, we check that the signature of the MEVM node on a SUAVE transaction comes from the public address for which the original request was encrypted. State transition only depends on the result of the confidential computation, so it remains fully reproducible.
    - SUAVE transactions are propagated through the mempool and inserted into blocks as expected, unifying confidential operation with regular operation. 

## Pictures

<AlignItems horizontal="center" vertical="center" sideMargin={0}>
<div>
  <img alt="Fairier Transformers" src={require('/static/img/confidentialCompute.png').default} />
</div>
</AlignItems>

## FAQs

<details>
  <summary>1. How do we ensure that <code>confidentialComputeRequests</code> reach their intended MEVM nodes?</summary>
  <div>
    <div>
      Ensuring users can send their requests directly to the specified MEVM node is an area of active research. One way to do this is to ensure that the logic for sending encrypted messages to their intended recipient lives within SGX, so we can be sure it won't be tampered with.
    </div>
  </div>
</details>

<details>
  <summary>2. How do MEVM nodes get paid, or how do we protect against spam?</summary>
  <div>
    <div>
      We require a signature for each <code>confidentialComputeRequest</code>. These requests also include a <code>creationTx</code> with a gas price, thereby limiting spam. How to price SUAVE gas correctly without leaking too much information about the nature of the request is an active area of research.
    </div>
  </div>
</details>

<details>
  <summary>3. How do confidential transactions result in stuff happening (like blocks being built) on other blockchains?</summary>
  <div>
    <div>
      What we describe above occurs on SUAVE. It is the responsibility of applications on SUAVE to broadcast blocks that have been built, or the result of various kinds of auction, back to other blockchains (like Ethereum). At first, we assume that this will happen via already-established relays.
    </div>
  </div>
</details>
